<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">   
  <link rel="stylesheet" type="text/css" href="style.css">  
  <style>
  h3 {
    color: red;
  }
  .login-box {
    height: 400px;
  }
  </style>
</head>
<body>
    <form id="loginForm" onsubmit="event.preventDefault(); attemptLogin();">
    <div class="login-box">
    <img src="user.png" class="avatar">
        <h3><center>Incorrect Username or Password</center></h3>
            <p>Username</p>
            <input type="text" name="username" placeholder="Enter Username" required="required">
            <p>Password</p>
            <input type="password" name="password" placeholder="Enter Password" required="required">
            <button type="submit">Login</button>
            </form>
              <center><h1><a href="index.html">Back</a></h1></center>
        </div>   
    
    <script>
    function attemptLogin() {
        const formData = new URLSearchParams(new FormData(document.getElementById('loginForm')));
        
        // Use the same microservice URL as in adminLogin.html
        fetch('http://192.168.49.2:31001/auth-service/auth/login', {
            method: 'POST',
            headers: {'Content-Type': 'application/x-www-form-urlencoded'},
            body: formData
        })
        .then(response => {
            if(response.ok) {
                window.location.href = 'adminHome.jsp';
            } else {
                window.location.href = 'errorAdminLogin.html';
            }
        })
        .catch(error => {
            console.error('Error:', error);
            window.location.href = 'errorAdminLogin.html';
        });
    }
    </script>
</body>
</html>
